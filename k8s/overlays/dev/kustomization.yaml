apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: boulder

resources:
  - ../../namespaces/boulder-namespace.yaml
  - ../../external-services/mariadb/statefulset.yaml
  - ../../external-services/mariadb/service.yaml
  - ../../external-services/proxysql/configmap.yaml
  - ../../external-services/proxysql/deployment.yaml
  - ../../external-services/proxysql/service.yaml
  - ../../external-services/jaeger/deployment.yaml
  - ../../external-services/jaeger/service.yaml
  - ../../external-services/pkimetal/deployment.yaml
  - ../../external-services/pkimetal/service.yaml
  - ../../boulder/deployment.yaml
  - ../../boulder/service.yaml
  - ../../networking/network-policies.yaml

patchesStrategicMerge:
  - redis-no-tls-patch.yaml
  - consul-no-tls-patch.yaml
  - boulder-simplified-patch.yaml

configMapGenerator:
  - name: redis-config
    behavior: replace
    files:
      - redis.conf=redis-dev.conf
  - name: consul-config
    behavior: replace
    files:
      - config.hcl=consul-dev.hcl
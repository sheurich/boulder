apiVersion: v1
kind: ConfigMap
metadata:
  name: consul-services
  namespace: boulder-test
data:
  config.hcl: |
    # Boulder services configuration for Consul
    # All services point to the boulder-monolith pod at 10.77.77.77

    services {
      id      = "email-exporter-a"
      name    = "email-exporter"
      address = "10.77.77.77"
      port    = 9603
      tags    = ["tcp"]
    }

    services {
      id      = "boulder-a"
      name    = "boulder"
      address = "10.77.77.77"
    }

    services {
      id      = "ca-a"
      name    = "ca"
      address = "10.77.77.77"
      port    = 9393
      tags    = ["tcp"]
    }

    services {
      id      = "ca-b"
      name    = "ca"
      address = "10.77.77.77"
      port    = 9493
      tags    = ["tcp"]
    }

    services {
      id      = "crl-storer-a"
      name    = "crl-storer"
      address = "10.77.77.77"
      port    = 9309
      tags    = ["tcp"]
    }

    services {
      id      = "dns-a"
      name    = "dns"
      address = "10.77.77.77"
      port    = 8053
      tags    = ["udp"]
    }

    services {
      id      = "dns-b"
      name    = "dns"
      address = "10.77.77.77"
      port    = 8054
      tags    = ["udp"]
    }

    services {
      id      = "doh-a"
      name    = "doh"
      address = "10.77.77.77"
      port    = 8343
      tags    = ["tcp"]
    }

    services {
      id      = "doh-b"
      name    = "doh"
      address = "10.77.77.77"
      port    = 8443
      tags    = ["tcp"]
    }

    services {
      id      = "nonce-taro-a"
      name    = "nonce-taro"
      address = "10.77.77.77"
      port    = 9301
      tags    = ["tcp"]
    }

    services {
      id      = "nonce-taro-b"
      name    = "nonce-taro"
      address = "10.77.77.77"
      port    = 9501
      tags    = ["tcp"]
    }

    services {
      id      = "nonce-zinc"
      name    = "nonce-zinc"
      address = "10.77.77.77"
      port    = 9401
      tags    = ["tcp"]
    }

    services {
      id      = "publisher-a"
      name    = "publisher"
      address = "10.77.77.77"
      port    = 9391
      tags    = ["tcp"]
    }

    services {
      id      = "publisher-b"
      name    = "publisher"
      address = "10.77.77.77"
      port    = 9491
      tags    = ["tcp"]
    }

    services {
      id      = "ra-sct-provider-a"
      name    = "ra-sct-provider"
      address = "10.77.77.77"
      port    = 9594
      tags    = ["tcp"]
    }

    services {
      id      = "ra-sct-provider-b"
      name    = "ra-sct-provider"
      address = "10.77.77.77"
      port    = 9694
      tags    = ["tcp"]
    }

    services {
      id      = "ra-a"
      name    = "ra"
      address = "10.77.77.77"
      port    = 9394
      tags    = ["tcp"]
    }

    services {
      id      = "ra-b"
      name    = "ra"
      address = "10.77.77.77"
      port    = 9494
      tags    = ["tcp"]
    }

    services {
      id      = "rva1-a"
      name    = "rva1"
      address = "10.77.77.77"
      port    = 9397
      tags    = ["tcp"]
    }

    services {
      id      = "rva1-b"
      name    = "rva1"
      address = "10.77.77.77"
      port    = 9498
      tags    = ["tcp"]
    }

    services {
      id      = "rva1-c"
      name    = "rva1"
      address = "10.77.77.77"
      port    = 9499
      tags    = ["tcp"]
    }

    services {
      id      = "rva2-a"
      name    = "rva2"
      address = "10.77.77.77"
      port    = 9897
      tags    = ["tcp"]
    }

    services {
      id      = "rva2-b"
      name    = "rva2"
      address = "10.77.77.77"
      port    = 9998
      tags    = ["tcp"]
    }

    services {
      id      = "sa-a"
      name    = "sa"
      address = "10.77.77.77"
      port    = 9395
      tags    = ["tcp"]
    }

    services {
      id      = "sa-b"
      name    = "sa"
      address = "10.77.77.77"
      port    = 9495
      tags    = ["tcp"]
    }

    services {
      id      = "va-a"
      name    = "va"
      address = "10.77.77.77"
      port    = 9392
      tags    = ["tcp"]
    }

    services {
      id      = "va-b"
      name    = "va"
      address = "10.77.77.77"
      port    = 9492
      tags    = ["tcp"]
    }

    services {
      id      = "bredis3"
      name    = "redisratelimits"
      address = "bredis-1"
      port    = 6379
      tags    = ["tcp"]
    }

    services {
      id      = "bredis4"
      name    = "redisratelimits"
      address = "bredis-2"
      port    = 6379
      tags    = ["tcp"]
    }

    # Test services for integration tests
    services {
      id      = "case1a"
      name    = "case1a"
      address = "10.77.77.77"
      port    = 9301
      tags    = ["tcp"]
      checks = [
        {
          id       = "case1a-failing"
          name     = "case1a-failing"
          http     = "http://localhost:12345"
          method   = "GET"
          interval = "2s"
        }
      ]
    }

    services {
      id      = "case1b"
      name    = "case1b"
      address = "10.77.77.77"
      port    = 9401
      tags    = ["tcp"]
    }

    services {
      id      = "case2b"
      name    = "case2b"
      address = "10.77.77.77"
      port    = 9401
      tags    = ["tcp"]
    }

    services {
      id      = "case4a"
      name    = "case4a"
      address = "10.77.77.77"
      port    = 9301
      tags    = ["tcp"]
      checks = [
        {
          id       = "case4a-failing"
          name     = "case4a-failing"
          http     = "http://localhost:12345"
          method   = "GET"
          interval = "2s"
        }
      ]
    }

    services {
      id      = "case4b"
      name    = "case4b"
      address = "10.77.77.77"
      port    = 9401
      tags    = ["tcp"]
      checks = [
        {
          id       = "case4b-failing"
          name     = "case4b-failing"
          http     = "http://localhost:12345"
          method   = "GET"
          interval = "2s"
        }
      ]
    }